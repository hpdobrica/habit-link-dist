import{_ as $}from"./CTdwzV9_.js";import{m as A,r as M,f as B,c as d,x as S,a as e,G as I,K as T,F as D,u as N,H as F,o as c,t as m,_ as O,A as P,B as w,C as j,b as y,w as E,D as u,E as g,d as V}from"./BG282lcn.js";import{u as L,a as U}from"./DZIMZFo2.js";import{u as q}from"./BGBHUUAQ.js";import"./QBULzwXv.js";const G={key:1,class:"modal"},K={class:"modal-controls"},z=["value"],J=A({__name:"attachHabitModal",props:{habits:Object},emits:["selectionMade"],setup(H,{expose:n,emit:s}){const b=H;if(!b.habits)throw new Error("habits prop is required");const i=M(!1),r=M(""),o=M("");B(r,p=>{if(!b.habits)return;const a=Object.keys(b.habits||{}).find(h=>h===p);if(!a)return;let t=b.habits[a].targetDurationSec.toString();t!="0"?o.value=t:o.value=""});const x=s;function l(){r.value="",o.value=""}function f(){if(!r.value){alert("Please select an option.");return}if(o.value==""||o.value=="0"){alert("Please enter a valid duration.");return}if(o.value==null){alert("Please enter a valid durationx.");return}const p={habitId:r.value,durationSec:parseInt(o.value)};x("selectionMade",p),l(),v()}function k(){i.value=!0}function v(){i.value=!1}return n({openModal:k,closeModal:v}),(p,a)=>(c(),d("div",null,[i.value?(c(),d("div",{key:0,class:"modal-overlay",onClick:v})):S("",!0),i.value?(c(),d("div",G,[a[3]||(a[3]=e("h2",{class:"modal-title"},"Choose an Option",-1)),e("div",K,[I(e("select",{"onUpdate:modelValue":a[0]||(a[0]=t=>r.value=t)},[a[2]||(a[2]=e("option",{value:"",disabled:""},"Select...",-1)),(c(!0),d(D,null,N(b.habits,t=>(c(),d("option",{value:t.id},m(t.icon)+" "+m(t.title),9,z))),256))],512),[[T,r.value]]),I(e("input",{type:"number",class:"input-field","onUpdate:modelValue":a[1]||(a[1]=t=>o.value=t),placeholder:"override duration seconds"},null,512),[[F,o.value]])]),e("button",{class:"submit-button",onClick:f},"Submit")])):S("",!0)]))}}),Q=O(J,[["__scopeId","data-v-005eb968"]]),W={class:"content"},X={class:"cards-container"},Y=["index"],Z={class:"card-content"},tt={class:"habit-icon"},et={class:"habit-title"},at={class:"habit-duration"},ot={class:"card-actions"},nt=["onClick"],ct=A({__name:"index",async setup(H){let n,s;const i=P().params.id;if(typeof i!="string")throw[n,s]=w(()=>g("/")),await n,s(),new Error("wrong routine id, not a string");const r=L(),o=U(),x={id:"routine-null",title:"",habitInstances:[]},l=j(()=>o.value[i]||x);if(!l)throw[n,s]=w(()=>g("/")),await n,s(),new Error("wrong routine id, not found");if(!l.value)throw[n,s]=w(()=>g("/")),await n,s(),new Error("wrong routine id, empty value");if(l.value.id==="routine-null")throw[n,s]=w(()=>g("/")),await n,s(),new Error("wrong routine id, routine doesnt exist");const f=q(),k=({habitId:a,durationSec:t})=>{console.log(a,t),r.addHabitInstanceToRoutine(i,a,t)},v=M(null);function p(){v.value?v.value.openModal():console.error("AttachHabitModal is not available yet.")}return(a,t)=>{var C;const h=$;return c(),d("div",W,[y(h,{class:"back-button",to:"/"},{default:E(()=>t[0]||(t[0]=[V("üîô")])),_:1}),e("div",X,[e("h1",null,m((C=u(l))==null?void 0:C.title),1),(c(!0),d(D,null,N(u(l).habitInstances,(_,R)=>(c(),d("div",{class:"card",key:_.habitInstanceId,index:R},[e("div",Z,[e("span",tt,m(u(f).habits.value[_.habitId].icon),1),e("span",et,m(u(f).habits.value[_.habitId].title),1),e("span",at,m(_.durationSec)+"sec",1)]),e("div",ot,[t[1]||(t[1]=e("span",{class:"action-button edit-button"},"üñäÔ∏è",-1)),e("span",{class:"action-button delete-button",onClick:st=>u(r).removeHabitInstance(u(i),_.habitInstanceId)},"üóëÔ∏è",8,nt)])],8,Y))),128)),e("div",{class:"card add-habit-card",onClick:p},t[2]||(t[2]=[e("div",{class:"card-content"},[e("span",{class:"habit-title"},"+ Attach Habit")],-1)]))]),y(h,{to:{name:"routines-id-run",params:{id:u(l).id}},class:"floating-button"},{default:E(()=>t[3]||(t[3]=[V(" ‚ñ∂Ô∏è ")])),_:1},8,["to"]),y(Q,{habits:u(f).habits.value,ref_key:"attachHabitModal",ref:v,onSelectionMade:k},null,8,["habits"])])}}});export{ct as default};
