import{_ as A}from"./BciscfNl.js";import{_ as R}from"./BZRtX6jb.js";import{m as E,r as w,g as z,o as i,c as s,x as _,a as t,A as v,B as M,I as G,d as $,J as U,_ as J,G as P,F as x,u as D,C as V,b as H,t as h,w as W,v as q}from"./Cy1DWeqi.js";import{u as K}from"./BWljnZHQ.js";import{u as Q}from"./BcjriIf4.js";import"./CAFlqnyI.js";const X={key:1,class:"modal"},Y={class:"modal-controls"},Z={class:"form-group"},ee={class:"form-group"},te={class:"form-group"},ae={class:"form-group"},oe={class:"target-selection"},le=["disabled"],ne=E({__name:"createHabitModal",emits:["selectionMade"],setup(j,{expose:g,emit:C}){const e=w({icon:"",title:"",isTracked:!0,targetType:"completions",targetValue:0}),d=w(!1),S=C;function k(){if(e.value.icon==""||e.value.title==""||e.value.targetValue==0){alert("Please fill out all fields.");return}const m={icon:e.value.icon,title:e.value.title,isTracked:e.value.isTracked,targetDurationSec:e.value.targetType==="duration"?e.value.targetValue:0,targetCompletions:e.value.targetType==="completions"?e.value.targetValue:0};S("selectionMade",m),b(),y()}function b(){e.value={icon:"",title:"",isTracked:!0,targetType:"completions",targetValue:0}}z(()=>e.value.isTracked,m=>{m||(e.value.targetType="duration")});function f(){d.value=!0}function y(){d.value=!1}return g({openModal:f,closeModal:y}),(m,a)=>(i(),s("div",null,[d.value?(i(),s("div",{key:0,class:"modal-overlay",onClick:y})):_("",!0),d.value?(i(),s("div",X,[a[13]||(a[13]=t("h2",{class:"modal-title"},"Create a New Habit",-1)),t("div",Y,[t("div",Z,[a[7]||(a[7]=t("label",{for:"habit-icon"},"Icon (Emoji):",-1)),v(t("input",{id:"habit-icon",type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>e.value.icon=o),placeholder:"e.g., ðŸ’ª"},null,512),[[M,e.value.icon]])]),t("div",ee,[a[8]||(a[8]=t("label",{for:"habit-title"},"Title:",-1)),v(t("input",{id:"habit-title",type:"text","onUpdate:modelValue":a[1]||(a[1]=o=>e.value.title=o),placeholder:"Habit title"},null,512),[[M,e.value.title]])]),t("div",te,[t("label",null,[v(t("input",{type:"checkbox","onUpdate:modelValue":a[2]||(a[2]=o=>e.value.isTracked=o)},null,512),[[G,e.value.isTracked]]),a[9]||(a[9]=$(" Track this habit "))])]),t("div",ae,[a[12]||(a[12]=t("label",null,"Target:",-1)),t("div",oe,[v(t("input",{type:"radio",value:"completions","onUpdate:modelValue":a[3]||(a[3]=o=>e.value.targetType=o),disabled:!e.value.isTracked},null,8,le),[[U,e.value.targetType]]),a[10]||(a[10]=t("label",null," Number of Completions ",-1)),v(t("input",{type:"radio",value:"duration","onUpdate:modelValue":a[4]||(a[4]=o=>e.value.targetType=o)},null,512),[[U,e.value.targetType]]),a[11]||(a[11]=t("label",null," Duration (Seconds) ",-1))]),e.value.targetType==="completions"?v((i(),s("input",{key:0,type:"number","onUpdate:modelValue":a[5]||(a[5]=o=>e.value.targetValue=o),placeholder:"Enter number of completions"},null,512)),[[M,e.value.targetValue]]):_("",!0),e.value.targetType==="duration"?v((i(),s("input",{key:1,type:"number","onUpdate:modelValue":a[6]||(a[6]=o=>e.value.targetValue=o),placeholder:"Enter duration in seconds"},null,512)),[[M,e.value.targetValue]]):_("",!0)])]),t("button",{class:"submit-button",onClick:k},"Create Habit")])):_("",!0)]))}}),ie=J(ne,[["__scopeId","data-v-33fe82d7"]]),se={class:"habit-tracker"},re={class:"habits"},ue={class:"date-heading weekday"},de={key:0},ce={class:"habit-info"},pe={class:"habit-icon"},ke=E({__name:"index",setup(j){const g=K(),C=g.habitsLoading,e=P(()=>Object.fromEntries(Object.entries(g.habits.value).filter(([o,l])=>l.isTracked))),d=new Date,S=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],k=Q();function b(o,l){const r=new Date(o);return r.setDate(r.getDate()-l),r}const f=w(null);function y(){f.value?f.value.openModal():console.error("CreateHabitModal is not available yet.")}const m=o=>{g.addHabit(o.icon,o.title,o.targetDurationSec,o.targetCompletions,o.isTracked)};function a(o,l){const r=e.value[o],T=r.targetDurationSec?"duration":"completions",n=b(d,l).toISOString().split("T")[0],u=T==="duration"?r.targetDurationSec:r.targetCompletions;let c=0;if(T==="duration"?c=Object.values(k.habitLogs.value).filter(p=>p.habitId===o&&p.date===n).reduce((p,B)=>p+B.durationSec,0):c=Object.values(k.habitLogs.value).filter(p=>p.habitId===o&&p.date===n).length,c===0)return{background:"#ccc"};const F=Math.min(c/u*100,100),N=Math.round(255*F/100),I=`rgb(${255-N}, 255, ${255-N})`,L=c>=u?"0 0 10px 2px rgba(0, 255, 0, 0.5)":"none",O=c>=u?"none":"1px solid #ddd";return{background:I,boxShadow:L,border:O}}return(o,l)=>{const r=A,T=R;return i(),s(x,null,[t("div",se,[t("div",{class:"header"},[l[1]||(l[1]=t("h1",null,"Habits",-1)),t("div",{class:"actions"},[t("button",{class:"create",onClick:y},"+"),l[0]||(l[0]=t("button",{class:"filter"},"â˜°",-1))])]),t("div",re,[l[3]||(l[3]=t("div",{class:"habit-info"},null,-1)),(i(!0),s(x,null,D(Array.from({length:6},(n,u)=>u),n=>(i(),s("div",{class:"date-heading",key:n},[$(h(b(V(d),n).getDate()),1),l[2]||(l[2]=t("br",null,null,-1)),t("span",ue,h(S[b(V(d),n).getDay()]),1)]))),128))]),V(C)?(i(),s("div",de,"Loading...")):(i(!0),s(x,{key:1},D(V(e),n=>(i(),s("div",{class:"habits",key:n.id},[t("div",ce,[t("div",pe,h(n.icon),1),H(r,{to:{name:"habits-id",params:{id:n.id}},class:"habit-name"},{default:W(()=>[$(h(n.title),1)]),_:2},1032,["to"])]),(i(!0),s(x,null,D(Array.from({length:6},(u,c)=>c),u=>(i(),s("div",{class:"day-entry",style:q(a(n.id,u)),key:u},null,4))),128))]))),128))]),H(ie,{ref_key:"createHabitModal",ref:f,onSelectionMade:m},null,512),H(T)],64)}}});export{ke as default};
